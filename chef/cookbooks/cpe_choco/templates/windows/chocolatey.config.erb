<?xml version="1.0" encoding="utf-8"?>
<chocolatey xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <containsLegacyPackageInstalls>false</containsLegacyPackageInstalls>
  <commandExecutionTimeoutSeconds>2700</commandExecutionTimeoutSeconds>
  <config>
<% @node['cpe_choco']['config'].each do |setting, opts| %>
    <add key="<%= setting %>" value="<%= opts['value'] %>" description="<%= opts['description'] %>" />
  <% end %>
  </config>
  <sources>
  <% @node['cpe_choco']['sources'].each_with_index do |(feed,source_info), idx| %>
    <source id="<%= feed %>" value="<%= source_info['source'] %>" disabled="false" priority="<%= idx %>" />
  <% end %>
  </sources>
  <features>
  <% @node['cpe_choco']['features'].each do |name, opts| %>
    <feature name="<%= name %>" enabled="<%= opts['enabled'].to_s %>" setExplicitly="<%= opts['setExplicitly'].to_s %>" description="<%= opts['description'] %>" />
  <% end %>
  </features>
  <apiKeys />
</chocolatey>